---
- name: Execute OS-specific tasks (logstash)
  block:
    - include_tasks: "{{ ansible_os_family }}.yml"
  module_defaults:
    yum: { lock_timeout: 300 }

- name: Ensure Logstash is disabled
  systemd:
    name: logstash
    enabled: no
    state: stopped

- name: Provide logstash-export.conf template file
  copy:
    src: logstash-export.conf.template
    dest: /etc/logstash/logstash-export.conf.template
